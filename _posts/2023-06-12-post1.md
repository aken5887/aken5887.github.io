---
layout: post
title:  "ν† λΉ„μ μ¤ν”„λ§ - 2-4μ¥ μ¤ν”„λ§ @MVC"
date:   2023-06-12
categories: Spring
tags : ν† λΉ„μμ¤ν”„λ§
---

# μ¤ν”„λ§ MVCμ™€ DispatcherServlet

- μ¤ν”„λ§μ€ `DispatcherServlet`κ³Ό 7κ°€μ§€μ μ „λµμ„ κΈ°λ°μΌλ΅ ν• MVC ν”„λ μ„μ›ν¬λ¥Ό μ κ³µν•λ‹¤.
    1. `HandlerMapping`
    2. `HandlerAdapter`
    3. `ViewResolver`
    4. `HandlerExceptionResolver`
    5. `ThemeResolver`
    6. `LocaleResolver`
    7. `RequestToViewNameTranslator`
- μ¤ν”„λ§ MVC ν”„λ μ„μ›ν¬μ μ¥μ μ€ μ μ—°ν• ν™•μ¥μ΄ κ°€λ¥ν•λ„λ΅ μ„¤κ³„λ MVC μ—”μ§„μΈ **`DispatcherServlet`**μ΄λ‹¤.

# 4.1 @RequestMapping ν•Έλ“¤λ¬ λ§¤ν•‘

---

- @MVCμ κ°€μ¥ ν° νΉμ§•
    - ν•Έλ“¤λ¬ λ§¤ν•‘κ³Ό ν•Έλ“¤λ¬ μ–΄λ‘ν„°μ λ€μƒμ΄ μ¤λΈμ νΈκ°€ μ•„λ‹λΌ λ©”μ†λ“μ΄λ‹¤.
- @MVC λ“±μ¥μ΄μ „
    - μ»¨νΈλ΅¤λ¬ νƒ€μ…μ„ λΉ„κµν•΄μ„ μ»¨νΈλ΅¤λ¬λ¥Ό μ„ νƒ, νƒ€μ…μ— μ •μλ λ©”μ†λ“λ¥Ό ν†µν•΄ μ‹¤ν–‰ν•λ‹¤.
- @MVC λ“±μ¥μ΄ν›„
    - μ• λ…Έν…μ΄μ…μΌλ΅ λ€μ²΄ ν•μ€λ‹¤.
- @MVC ν•Έλ“¤λ¬ λ§¤ν•‘μ„ μ„ν•΄μ„λ” **`RequestMappingHandlerMapping`**μ΄ ν•„μ”ν•λ‹¤.
    - **`RequestMappingHandlerMapping`**μ€ ν•Έλ“¤λ¬ λ§¤ν•‘μ κΈ°λ³Έ μ „λµ μ¤‘ ν•λ‚μ΄λ‹¤.

## 4.1.1 ν΄λμ¤/λ©”μ†λ“ κ²°ν•© λ§¤ν•‘μ •λ³΄

- **`RequestMappingHandlerMapping`**μ ν•µμ‹¬μ€ λ§¤ν•‘μ •λ³΄λ΅ `@RequestMapping` μ• λ…Έν‹°μ—μ…μ„ ν™μ©ν•λ‹¤λ” μ μ΄λ‹¤.
- νƒ€μ…κ³Ό λ©”μ†λ“ λ λ²¨μ— λ¶™μ€ μ •λ³΄λ¥Ό κ²°ν•©ν•μ—¬ μµμΆ… λ§¤ν•‘ μ •λ³΄λ¥Ό μƒμ„±ν•λ‹¤.

### `@RequestMapping` μ• λ…Έν…μ΄μ…

- `String[] value()` : URL ν¨ν„΄
    - ν•λ‚ μ΄μƒμ URL ν¨ν„΄μ„ μ§€μ •ν•  μ μλ‹¤.
    - λ””ν΄νΈ μ ‘λ―Έμ–΄ ν¨ν„΄μ΄ μ μ© λλ‹¤.
        - ν™•μ¥μκ°€ λ¶™μ§€ μ•κ³ , / λ΅ λλ‚μ§€λ„ μ•μ€ URL ν¨ν„΄
        - `@RequestMapping(β€/helloβ€)`
            
            = /helllo.do, /hello.html, /hello/ .. λ¨λ‘ λ§¤ν•‘λ¨
            
- λ§¤ν•‘μ΅°κ±΄μ„ λ§μ΅±ν•λ” κ²½μ°κ°€ μ—¬λ¬ κ°κ°€ μμ„ λ•λ” μΆ€ λ” λ§μ€ μ΅°κ±΄μ„ λ§μ΅±μ‹ν‚¤λ” μ½μ΄ μ°μ„ λλ‹¤.

## 4.1.2 νƒ€μ… μƒμ†κ³Ό λ§¤ν•‘

---

- μ„λΈ ν΄λμ¤μ—μ„ μ¬μ •μν•μ§€ μ•λ” ν• `@RequesetMapping` μ •λ³΄λ” μƒμ†λλ©° μ μ§€λλ‹¤.
- `@RequestMapping`μ„ μΈν„°νμ΄μ¤ λ λ²¨μ—μ„ λ¶€μ—¬ν•λ©΄, νƒ€μ… μƒμ†(μΈν„°νμ΄μ¤ κµ¬ν„)μ„ ν†µν•΄ κ³µν†µ λ§¤ν•‘μ •λ³΄λ¥Ό μΌκ΄„μ μΌλ΅ μ μ©ν•  μ μλ‹¤.

# 4.2 Controller

---

- ~~DefaultAnnotationHandlerMapping~~ β†’ **`RequestMappingHandlerMapping`**
    
    ![Untitled](/assets/images/posts/2023-06-12-post1/Untitled.png)
    
    μ‚¬μ©μ μ”μ²­μ„ `@RequestMapping` μ •λ³΄λ¥Ό ν™μ©ν•΄μ„ μ»¨νΈλ΅¤λ¬ λΉμ λ©”μ†λ“μ— λ§¤ν•‘ν•λ‹¤.
    
- **~~AnnotationMethodHandlerAdapter~~ -> `RequestMappingHandlerAdpater`**
    
    ![Untitled](/assets/images/posts/2023-06-12-post1/Untitled%201.png)
    
    λ§¤ν•‘λ λ©”μ†λ“λ¥Ό μ‹¤μ λ΅ νΈμ¶ν•λ” μ—­ν• μ„ λ‹΄λ‹Ήν•λ‹¤.
    

π’΅ **μ»¨νΈλ΅¤λ¬κ°€ `DispatcherServlet`μΌλ΅λ¶€ν„° μ‹¤ν–‰λλ” κ³Όμ •**

ν•Έλ“¤λ¬ μ–΄λ‘ν„°λ” `DispatcherServlet` λ΅ λ¶€ν„° `HttpServletRequest` μ™€ `HttpServletResponse` λ¥Ό μ κ³µ λ°›μ•„ μ»¨νΈλ΅¤λ¬κ°€ μ‚¬μ©ν•λ” νλΌλ―Έν„° νƒ€μ…μΌλ΅ λ³€ν™ν•΄μ„ μ κ³µν•΄ μ¤€λ‹¤. κ·Έλ¦¬κ³  μ»¨νΈλ΅¤λ¬ λ΅λ¶€ν„° λ°›μ€ κ²°κ³Όλ¥Ό `ModelAndview` νƒ€μ…μ μ¤λΈμ νΈμ— λ‹΄μ•„μ„ `DispatcherServlet`μ— λ„κ²¨μ¤€λ‹¤. 

π’΅ μµμ ν™”λ λ©”μ†λ“ μ„¤κ³„

μ¤ν”„λ§μ€ λ©”μ†λ“μ νλΌλ―Έν„°μ™€ λ¦¬ν„΄ κ°’μ΄ μ–΄λ–»κ² μ„ μ–Έλμ—λ”μ§€ μ‚΄ν΄λ³΄κ³ , μ΄λ¥Ό μ΄μ©ν•΄ μ μ ν• νλΌλ―Έν„° κ°’μ„ μ¤€λΉ„ν•΄μ„ νΈμ¶ν•΄μ¤€λ‹¤. 

λ¦¬ν„΄ κ°’λ„ νƒ€μ…μ— λ”°λΌ μ μ ν• λ°©μ‹μΌλ΅ μ‚¬μ©ν•λ‹¤.

## 4.2.1 λ©”μ†λ“ νλΌλ―Έν„° μΆ…λ¥

---

μ¤ν”„λ§μ€ νλΌλ―Έν„°μ νƒ€μ…κ³Ό μ΄λ¦„, μ• λ…Έν…μ΄μ… μ •λ³΄λ¥Ό μ°Έκ³ ν•΄μ„ κ·Έμ— λ§λ” νλΌλ―Έν„° κ°’μ„ μ κ³µν•΄μ¤€λ‹¤.

### HttpServletRequest, HttpServletResponse

### HttpSession

### InputStream, Reader, OutputStream, Writer

- `HttpServletRequest`μ `getOutputStrem(β€¦)`μΌλ΅ κ°€μ Έμ¬ μ μλ” μ¶λ ¥μ© μ½ν…νΈ μ¤νΈλ¦Ό λλ” Writer νƒ€μ… μ¤λΈμ νΈλ¥Ό λ°›μ„ μ μλ‹¤.

### @PathVariable

### @RequestParam

- μ„ μ–Έλ μΈμλ” κΈ°λ³Έμ μΌλ΅ ν•„μ κ°’μΌλ΅ μ„¤μ •λλ‹¤. μΈμ κ°’μ΄ μ„ νƒμΈ κ²½μ° `required=false` λ¥Ό μ‚¬μ©ν•λ‹¤.
- μ• λ…Έν…μ΄μ…μ€ μƒλµμ΄ κ°€λ¥ν•λ‹¤.

### @CookieValue

- μ„ μ–Έλ μΈμλ” κΈ°λ³Έμ μΌλ΅ ν•„μ κ°’μΌλ΅ μ„¤μ •λλ‹¤. μΈμ κ°’μ΄ μ„ νƒμΈ κ²½μ° `required=false` λ¥Ό μ‚¬μ©ν•λ‹¤.

### @RequestHeader

- ν—¤λ” μ •λ³΄λ¥Ό λ©”μ†λ“ νλΌλ―Έν„°μ— λ°”μΈλ”© ν•λ‹¤.
- μ„ μ–Έλ μΈμλ” κΈ°λ³Έμ μΌλ΅ ν•„μ κ°’μΌλ΅ μ„¤μ •λλ‹¤. μΈμ κ°’μ΄ μ„ νƒμΈ κ²½μ° `required=false` λ¥Ό μ‚¬μ©ν•λ‹¤.

### Map, Model, ModelMap

- λ¨λ‘ λ¨λΈμ •λ³΄λ¥Ό λ‹΄λ” λ° μ‚¬μ©ν•  μ μλ” μ¤λΈμ νΈκ°€ μ „λ‹¬λλ‹¤.
- νλΌλ―Έν„°λ΅ μ •μν•μ—¬ **ν•Έλ“¤λ¬ μ–΄λ‘ν„°μ—μ„ λ―Έλ¦¬ λ§λ“¤μ–΄ μ κ³µν•΄μ£Όλ” κ²ƒ**μ„ μ‚¬μ©ν•λ” κ²ƒμ΄ νΈλ¦¬ν•λ‹¤.
- `Model`, `ModelMap` λ¨λ‘ `addAttribute(β€¦)` λ©”μ†λ“λ¥Ό μ κ³µν•΄ μ¤€λ‹¤.

### @ModelAttribute

- λ©”μ†λ“ λ λ²¨, λ©”μ†λ“ νλΌλ―Έν„°μ—λ„ λ¶€μ—¬ν•  μ μλ‹¤.
- `@ModelAttribute`κ°€ λ¶™μ€ μΈμλ” λ¨λΈ λ§µμ— λ‹΄κ²¨μ„ λ·°μ— μ „λ‹¬λλ” λ¨λΈ μ¤λΈμ νΈμ ν•κ°€μ§€λ΅μ„, λ³„λ„μ μ„¤μ • μ—†μ΄λ„ μλ™μΌλ΅ λ·°μ— μ „λ‹¬λλ‹¤.
- μ¤ν”„λ§μ€ `@ModelAttribute`κ°€ λ¶™μ€ νλΌλ―Έν„° νƒ€μ…μ μ¤λΈμ νΈλ¥Ό λ§λ“¤κ³  ν”„λ΅νΌν‹°λ¥Ό ν†µν•΄ μ”μ²­ νλΌλ―Έν„°λ¥Ό λ„£μ–΄μ¤€λ‹¤.
- **@ModelAttribute μ• λ…Έν…μ΄μ…λ„ μƒλµμ΄ κ°€λ¥ν•λ‹¤!!β€¦**
    - μ¤ν”„λ§μ€ `String`, `int`λ“± κΈ°λ³Έ νƒ€μ…μ€ `@RequetParam`μ΄ μƒλµλ κ²ƒμΌλ΅ λ³΄κ³ , κ·Έ μ™Έμ λ³µμ΅ν• μ¤λΈμ νΈλ” λ¨λ‘ `@ModelAttribute`κ°€ μƒλµλλ‹¤κ³  κ°„μ£Όν•λ‹¤.
    - κ°€λ¥ν• `@ModelAttribute`, `@RequestParam`μ€ μƒλµν•μ§€ μ•κ³  μ‚¬μ©ν•λ” κ²ƒμ„ κ¶μ¥ν•λ‹¤. (μΈμμ κΈ°λ¥κ³Ό μ—­ν• μ΄ λ…μ‹μ μ΄κ³  λλ ·ν•λ‹¤.)
- **μ»¨νΈλ΅¤λ¬κ°€ λ¦¬ν„΄ν•λ” λ¨λΈμ— νλΌλ―Έν„°λ΅ μ „λ‹¬λ μ¤λΈμ νΈλ¥Ό μλ™μΌλ΅ μ¶”κ°€ν•λ‹¤. μ΄λ• λ¨λΈ μ΄λ¦„μ€ νλΌλ―Έν„° νƒ€μ…μ μ΄λ¦„μ„ λ”°λ¥Έλ‹¤.**
    - `@ModelAttribute` μ• λ…Έν…μ΄μ…λ§μΌλ΅λ„ λ¨λΈ μ¤λΈμ νΈλ¥Ό λ¨λΈ λ§µμ— μ¶”κ°€ν•΄μ¤

### [μ°Έκ³ ] @ModelAttributeκ°€ λ¶™μ€ λ¨λΈκ³Ό κ·Έ λ°–μ— λ¨λΈμ μ°¨μ΄
1. μ›Ή νμ΄μ§€μ νΌ μ •λ³΄μ²λΌ μ»¨νΈλ΅¤λ¬κ°€ μ „λ‹¬ λ°›μ•„ λ‚΄λ¶€ λ΅μ§μ— μ‚¬μ©ν•κ³ , ν•„μ”μ— λ”°λΌ λ‹¤μ‹ ν™”λ©΄μ— μ¶λ ¥ν•κΈ°λ„ ν•λ” μ”μ²­ μ •λ³΄μ΄λ‹¤.
2. @ModelAttributeλ” 1κ³Ό κ°™μ΄ μ»¨νΈλ΅¤λ¬μ— μ „λ‹¬ λ°›λ” μ¤λΈμ νΈμ ν•νƒμ μ •λ³΄λ¥Ό κ°€λ¥΄ν‚¨λ‹¤.
3. **μ»¤λ§¨λ“ μ¤λΈμ νΈ** : ν•λ‚μ μ¤λΈμ νΈμ— ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ •λ³΄λ¥Ό ν•λ²μ— λ‹΄μ•„ μ „λ‹¬ν•λ” κ²ƒμ„ μ»¤λ§¨λ“ ν¨ν„΄μ—μ„ λ§ν•λ” μ»¤λ§¨νΈ μ¤λΈμ νΈλΌ ν•λ‹¤.

### Error, BindingResult

- λ³€ν™μ΄ λ¶κ°€λ¥ν• νƒ€μ…μ μ”μ²­ νλΌλ―Έν„°κ°€ λ“¤μ–΄μ¨ κ²½μ°
    - `@RequestParam` β†’ HTTP 400 - Bad Request μ‘λ‹µμ΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•λ‹¤.
    - `@ModelAttribute` β†’ νƒ€μ… λ³€ν™ μ¤‘μ— λ°μƒν• μμ™Έκ°€ `BindException` νƒ€μ…μ μ¤λΈμ νΈμ— λ‹΄κ²¨μ„ μ»¨νΈλ΅¤λ¬λ΅ μ „λ‹¬ λλ‹¤. μ¦‰, νƒ€μ… λ³€ν™ λ¬Έμ λ¥Ό λ°”λ΅ μ—λ¬ μ²λ¦¬ν•μ§€ μ•λ”λ‹¤.
        - μ»¨νΈλ΅¤λ¬λ” μ μ ν• μ—λ¬ νμ΄μ§€λ¥Ό μ¶λ ¥ν•κ±°λ‚, μΉμ ν• μ—λ¬ λ©”μ„Έμ§€λ¥Ό ν†µν•΄μ„ μ‚¬μ©μκ°€ νΌμ„ λ‹¤μ‹ μμ •ν•  κΈ°νλ¥Ό μ¤μ•Ό ν•λ‹¤.
- `@ModelAttribute`λ¥Ό ν†µν•΄ νΌμ μ •λ³΄λ¥Ό μ „λ‹¬ λ°›μ„ λ•λ” `Errors` λλ” `BindingResult` νƒ€μ…μ νλΌλ―Έν„°λ¥Ό ν•¨κ» μ‚¬μ©ν•¨.
    - μ΄ λ‘ κ°€μ§€ νƒ€μ…μ νλΌλ―Έν„°λ” λ°λ“μ‹ `@ModelAttribute` νλΌλ―Έν„° λ’¤μ— λ‚μ™€μ•Ό ν•λ‹¤. λ°”λ΅ μ•μ— μλ” `@ModelAttribute` νλΌλ―Έν„° κ²€μ¦ μ‘μ—…μ—μ„ λ°μƒν• μ¤λ¥λ§ μ „λ‹¬ ν•΄μ£ΌκΈ° λ•λ¬Έμ΄λ‹¤.
    
    ```java
    @GeteMapping("/result")
    public String result(@ModelAttribute ResultRequest req, BindingResult bindingResult){
      if(bindingResult.hasError()){
        // μ—λ¬ μ²λ¦¬ λ©”μ„Έμ§€ μ¶λ ¥
      }
    }
    ```
    

### @RequestBody

- μ΄ μ• λ…Έν…μ΄μ…μ΄ λ¶™μ€ νλΌλ―Έν„°μ—λ” HTTP μ”μ²­ Body λ¶€λ¶„μ΄ κ·Έλ€λ΅ μ „λ‹¬ λλ‹¤.
- XMLμ΄λ‚ JSON κΈ°λ°μ λ©”μ„Έμ§€λ¥Ό μ‚¬μ©ν•λ” μ”μ²­μ κ²½μ°μ—λ” μ΄ λ°©λ²•μ΄ λ§¤μ° μ μ©
- `AnnotationMethodHandlerAdapter`μ—λ” `HttpMessageConverter` νƒ€μ…μ β€λ©”μ„Έμ§€ λ³€ν™κΈ°β€κ°€ μ—¬λ¬ κ° λ“±λ΅λμ–΄ μλ‹¤.
    1. `@RequestBody`κ°€ λ¶™μ€ νλΌλ―Έν„°κ°€ μμΌλ©΄ HTTP μ”μ²­μ λ―Έλ””μ–΄ νƒ€μ…κ³Ό νλΌλ―Έν„° νƒ€μ…μ„ μ°μ„  ν™•μΈ ν•λ‹¤.
    2. λ©”μ„Έμ§€ λ³€ν™κΈ° μ¤‘μ—μ„ ν•΄λ‹Ή λ―Έλ””μ–΄ νƒ€μ…κ³Ό νλΌλ―Έν„° νƒ€μ…μ„ μ²λ¦¬ν•  μ μλ” κ²ƒμ΄ μλ‹¤λ©΄, HTTP μ”μ²­μ λ³Έλ¬Έ λ¶€λ¶„μ„ ν†µμ§Έλ΅ λ³€ν™ν•΄μ„ μ§€μ •λ λ©”μ†λ“ νλΌλ―Έν„°λ΅ μ „λ‹¬ν•΄μ¤€λ‹¤.
- `MessageConverter`
    - `ByteArrayHttpMessageConverter`
    - `StringHttpMessageConverter`
    - `SourceHttpMessageConverter`
    - `AllEncompassingFormHttpMessageConverter`
- `@RequestBody`λ” λ³΄ν†µ `@ResponseBody`μ™€ ν•¨κ» μ‚¬μ©λλ‹¤.
- `RequestMappingHandlerAdapter`
    
    ```java
    // spring 5.3
    public RequestMappingHandlerAdapter() {
     this.messageConverters = new ArrayList<>(4);
     this.messageConverters.add(new ByteArrayHttpMessageConverter());
     this.messageConverters.add(new StringHttpMessageConverter());
     if (!shouldIgnoreXml) {
      try {
       this.messageConverters.add(new SourceHttpMessageConverter<>());
      }
      catch (Error err) {
    // Ignore when no TransformerFactory implementation is available
    }
     }
     this.messageConverters.add(new AllEncompassingFormHttpMessageConverter());
    }
    ```
    

### [μ°Έκ³ ] HandlerAdapter λ™μ‘κ³Όμ •

### μ”μ²­ μ²λ¦¬ μ‹ HandlerAdapterμ λ™μ‘ κ³Όμ •

- `HandlerMapping`μ„ ν†µν•΄ μ μ ν•Β `HandlerAdapter`λ¥Ό μ°ΎμΌλ©΄Β `HandlerAdapter`λ”Β Controllerλ΅ λ„κ²¨μ¤„ νλΌλ―Έν„°λ¥Ό κ²°μ •ν•κΈ° μ„ν•΄ μ΄ μ‘μ—…μ„Β `HandlerMethodArgumentResolver`μ—κ² μ„μ„ν•©λ‹λ‹¤.
- `HandlerMethodArgumentResolver`λ”Β `HttpMessageConverter`μ—κ² HTTP Request Bodyλ¥Ό νΉμ • νƒ€μ…μ κ°μ²΄λ΅ λ³€ν™ν•΄μ£ΌκΈ°λ¥Ό μ”μ²­ν•©λ‹λ‹¤.
- `HttpMessageConverter`λ” HTTP Request Bodyλ¥Ό νΉμ • νƒ€μ…μ κ°μ²΄λ΅ λ³€ν™ν•©λ‹λ‹¤.
- `HandlerMethodArgumentResolver`λ” λ³€ν™λ λ°μ΄ν„°λ¥Ό μ „λ‹¬ λ°›μ•„μ„ μ΄ λ°μ΄ν„°λ¥Ό λ‹¤μ‹Β `HandlerAdapter`μ—κ² μ „λ‹¬ν•©λ‹λ‹¤.
- `HandlerAdapter`λ”Β `HandlerMethodArgumentResolver`λ΅λ¶€ν„° μ „λ‹¬ λ°›μ€ λ°μ΄ν„°λ¥Ό ν•Έλ“¤λ¬ λ©”μ„λ“μ νλΌλ―Έν„°λ΅ ν¬ν•¨ μ‹ν‚¨ ν›„, ν•Έλ“¤λ¬ λ©”μ„λ“λ¥Ό νΈμ¶ν•©λ‹λ‹¤.

### μ‘λ‹µ μ²λ¦¬ μ‹ HandlerAdapterμ λ™μ‘ κ³Όμ •

- ν•Έλ“¤λ¬ λ©”μ„λ“κ°€ μ‘λ‹µμΌλ΅ μ „λ‹¬ν•  λ°μ΄ν„°λ¥Ό λ¦¬ν„΄ν•©λ‹λ‹¤.
- `HandlerMethodReturnValueHandler`λ” ν•Έλ“¤λ¬ λ©”μ„λ“λ΅λ¶€ν„° μ „λ‹¬ λ°›μ€ μ‘λ‹µ λ°μ΄ν„°λ¥ΌΒ `HttpMessageConverter`μ—κ² μ „λ‹¬ν•©λ‹λ‹¤.
- `HttpMessageConverter`λ”Β `HandlerMethodReturnValueHandler`λ΅λ¶€ν„° μ „λ‹¬ λ°›μ€ λ°μ΄ν„°λ¥Ό HTTP Response Bodyμ— ν¬ν•¨λλ” ν•μ‹μ λ°μ΄ν„°λ΅ λ³€ν™ν•©λ‹λ‹¤.
- `HandlerMethodReturnValueHandler`λ”Β `HttpMessageConverter`λ΅λ¶€ν„° μ „λ‹¬ λ°›μ€ λ°μ΄ν„°λ¥ΌΒ `HandlerAdapter`μ—κ² μ „λ‹¬ν•©λ‹λ‹¤.

![Untitled](/assets/images/posts/2023-06-12-post1/Untitled%202.png)

*μ¶μ² : [https://velog.io/@yoho98/HTTP-λ©”μ‹μ§€-μ»¨λ²„ν„°HttpMessageConverterfeat.-Argumentresolver-ReturnValueHandler](https://velog.io/@yoho98/HTTP-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%BB%A8%EB%B2%84%ED%84%B0HttpMessageConverterfeat.-Argumentresolver-ReturnValueHandler)*

- `HandlerAdapter` β†’ `HandlerMethodArgumentResolver` νΈμ¶
    - `DispatcherServlet` - `doService`
    - `DispatcherServlet` - `doDispatch`
    - `RequestMappingHandlerAdapter` - `handleInternal`
    - `RequestMappingHandlerAdapter` - `invokeHandlerMethod`
    - `ServletInvocableHandlerMethod` - `invokeAndHandle`
    - `InvocableHandlerMethod` - `invokeForRequest`
    - `InvocableHandlerMethod`  - `getMethodArgumentValues`
    - `HandlerMethodArgumentResolverComposite` - `resolveArgument`
    
    ```java
    @Override
    @Nullable
    public Object resolveArgument(MethodParameter parameter, @Nullable ModelAndViewContainer mavContainer,
      NativeWebRequest webRequest, @Nullable WebDataBinderFactory binderFactory) throws Exception {
  
      HandlerMethodArgumentResolver resolver = getArgumentResolver(parameter);
      if (resolver == null) {
        throw new IllegalArgumentException("Unsupported parameter type [" +
        parameter.getParameterType().getName() + "]. supportsParameter should be called first.");
       }
      return resolver.resolveArgument(parameter, mavContainer, webRequest, binderFactory);
  }                    
    ```
    - `@ModelAttribuite` μ΄μ©μ‹ `ModelAttributeMethodProcessor` - `resolveArgument`
    - `@ResponseBody` μ΄μ©μ‹ `RequestResponseBodyMethodProcessor` - `resolveArgument`
- `ReturnValueHandler`
    - `ServletInvocableHandlerMethod` - `invokeAndHandle`
    - `HandlerMethodReturnValueHandlerComposite` - `handleReturnValue`
    - `@ModelAttribuite` μ΄μ©μ‹ `ModelAttributeMethodProcessor` - `handleReturnValue`
    - `@ResponseBody` μ΄μ©μ‹ `RequestResponseBodyMethodProcessor` - `handleReturnValue`

## 4.2.2 λ¦¬ν„΄ νƒ€μ… μΆ…λ¥

μ»¨νΈλ΅¤λ¬κ°€ `DispatcherServlet`μ— λλ ¤μ¤μ•Ό ν•λ” μ •λ³΄λ” λ¨λΈκ³Ό λ·°λ‹¤.

ν•Έλ“¤λ¬ μ–΄λ‘ν„°λ¥Ό κ±°μ³μ„ μµμΆ…μ μΌλ΅ `DispatcherServlet`μ— λμ•„κ° λ•λ” `ModelAndView` νƒ€μ…μΌλ΅ λ¦¬ν„΄ κ°’μ΄ μ „λ‹¬λλ‹¤. 

### μλ™ μ¶”κ°€ λ¨λΈ μ¤λΈμ νΈμ™€ μλ™μƒμ„± λ·° μ΄λ¦„

λ©”μ†λ“ λ¦¬ν„΄ νƒ€μ…μ— μƒκ΄€μ—†μ΄ μ΅°κ±΄μ— λ§μΌλ©΄ λ¨λΈμ— μλ™μΌλ΅ μ¶”κ°€ λλ” μ¤λΈμ νΈ λ©λ΅

- `@ModelAttribute` λ¨λΈ μ¤λΈμ νΈ
- `Map, Model, ModelMap` νλΌλ―Έν„° μ¤λΈμ νΈ
    - νƒ€μ…μ μΈμλ¥Ό μ‚¬μ©ν•λ©΄ λ―Έλ¦¬ μƒμ„±λ λ¨λΈ λ§µ μ¤λΈμ νΈλ¥Ό μ „λ‹¬ λ°›μ•„μ„ μ¤λΈμ νΈλ¥Ό μ¶”κ°€ν•  μ μλ‹¤.
- `@ModelAttribute` λ©”μ†λ“
    - μ¤λΈμ νΈ ν΄λμ¤ λ‚΄μ λ‹¤λ¥Έ μ»¨νΈλ΅¤λ¬ λ©”μ†λ“μ λ¨λΈμ— μλ™μΌλ΅ μ¶”κ°€λλ‹¤.
- `BindingResult`
    - λ¨λΈ λ§µμ— μ¶”κ°€λ  λ• ν‚¤λ” `org.springframework.validation.BindingResult.λ¨λΈμ΄λ¦„`
    - ν•Έλ“¤λ¬ μΈν„°μ…‰νΈλ¥Ό μ΄μ©ν•΄ λ°”μΈλ”© κ²°κ³Όλ¥Ό λ΅κΉ…ν•κ±°λ‚ λ¶„μ„ν•  λ• μ‚¬μ©ν•  μ μλ‹¤.

### @ResponseBody

`@ReponseBody`κ°€ λ©”μ†λ“ λ λ²¨μ— λ¶€μ—¬λλ©΄ λ©”μ†λ“κ°€ λ¦¬ν„΄ν•λ” μ¤λΈμ νΈλ” λ©”μ„Έμ§€ μ»¨λ²„ν„°λ¥Ό ν†µν•΄  λ°”λ΅ HTTP μ‘λ‹µμ λ©”μ„Έμ§€ λ³Έλ¬ΈμΌλ΅ μ „ν™λλ‹¤.
